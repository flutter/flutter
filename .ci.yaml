enabled_branches:
  - ios-experimental

platform_properties:
  mac:
    properties:
      contexts: >-
        [
          "osx_sdk"
        ]
      dependencies: >-
        [
          {"dependency": "apple_signing", "version": "version:to_2025"}
        ]
      os: Mac-15.5
      device_type: none
      $flutter/osx_sdk : >-
        {
          "sdk_version": "17a5241e"
        }

  mac_arm64:
    properties:
      contexts: >-
        [
          "osx_sdk"
        ]
      dependencies: >-
        [
          {"dependency": "apple_signing", "version": "version:to_2025"}
        ]
      os: Mac-15.5
      device_type: none
      cpu: arm64
      $flutter/osx_sdk : >-
        {
          "sdk_version": "17a5241e"
        }

  mac_benchmark:
    properties:
      contexts: >-
        [
          "osx_sdk"
        ]
      dependencies: >-
        [
          {"dependency": "apple_signing", "version": "version:to_2025"}
        ]
      device_type: none
      mac_model: "Macmini8,1"
      os: Mac-15.5
      tags: >
        ["devicelab", "hostonly", "mac"]
      $flutter/osx_sdk : >-
        {
          "sdk_version": "17a5241e"
        }

  mac_x64:
    properties:
      contexts: >-
        [
          "osx_sdk"
        ]
      dependencies: >-
        [
          {"dependency": "apple_signing", "version": "version:to_2025"}
        ]
      os: Mac-15.5
      device_type: none
      cpu: x86
      $flutter/osx_sdk : >-
        {
          "sdk_version": "17a5241e"
        }

  mac_build_test:
    properties:
      contexts: >-
        [
          "osx_sdk"
        ]
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "apple_signing", "version": "version:to_2025"}
        ]
      os: Mac-15.5
      device_type: none
      cpu: x86
      $flutter/osx_sdk : >-
        {
          "sdk_version": "17a5241e"
        }

  mac_mokey:
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      os: Mac-15.5
      cpu: x86
      device_type: "mokey"

  mac_arm64_mokey:
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      os: Mac-15.5
      cpu: arm64
      device_type: "mokey"

  mac_ios:
    properties:
      contexts: >-
        [
          "osx_sdk_devicelab"
        ]
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "apple_signing", "version": "version:to_2025"}
        ]
      os: Mac-15.5
      device_os: iOS-17|iOS-18
      $flutter/osx_sdk : >-
        {
          "sdk_version": "17a5241e"
        }

  mac_x64_ios:
    properties:
      contexts: >-
        [
          "osx_sdk_devicelab"
        ]
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "apple_signing", "version": "version:to_2025"}
        ]
      os: Mac-15.5
      cpu: x86
      device_os: iOS-17|iOS-18
      $flutter/osx_sdk : >-
        {
          "sdk_version": "17a5241e"
        }

  mac_arm64_ios:
    properties:
      contexts: >-
        [
          "osx_sdk_devicelab"
        ]
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "apple_signing", "version": "none"}
        ]
      os: Mac-15.5
      cpu: arm64
      device_os: iOS-17|iOS-18
      $flutter/osx_sdk : >-
        {
          "sdk_version": "17a5241e"
        }

targets:
  - name: Mac_ios animated_advanced_blend_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: animated_advanced_blend_perf_ios__timeline_summary

  - name: Mac_ios rrect_blur_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: rrect_blur_perf_ios__timeline_summary

  - name: Mac_ios draw_vertices_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: draw_vertices_perf_ios__timeline_summary

  - name: Mac_ios draw_atlas_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: draw_atlas_perf_ios__timeline_summary

  - name: Mac_ios static_path_tessellation_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: static_path_tessellation_perf_ios__timeline_summary

  - name: Mac_ios dynamic_path_tessellation_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: dynamic_path_tessellation_perf_ios__timeline_summary

  - name: Mac_ios static_path_stroke_tessellation_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: static_path_stroke_tessellation_perf_ios__timeline_summary

  - name: Mac_ios dynamic_path_stroke_tessellation_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: dynamic_path_stroke_tessellation_perf_ios__timeline_summary

  - name: Mac_benchmark animated_complex_opacity_perf_macos__e2e_summary
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      task_name: animated_complex_opacity_perf_macos__e2e_summary

  - name: Mac_benchmark basic_material_app_macos__compile
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      task_name: basic_material_app_macos__compile

  - name: Mac build_ios_framework_module_test
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: build_ios_framework_module_test
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 build_ios_framework_module_test
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac", "arm64"]
      task_name: build_ios_framework_module_test
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_x64 build_tests_1_4
    recipe: flutter/flutter_drone
    presubmit: false # Rely on Mac_arm build_tests in presubmit.
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: build_tests
      subshard: "1_4"
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac_x64 build_tests_2_4
    recipe: flutter/flutter_drone
    presubmit: false # Rely on Mac_arm build_tests in presubmit.
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: build_tests
      subshard: "2_4"
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac_x64 build_tests_3_4
    recipe: flutter/flutter_drone
    presubmit: false # Rely on Mac_arm build_tests in presubmit.
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: build_tests
      subshard: "3_4"
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac_x64 build_tests_4_4
    recipe: flutter/flutter_drone
    presubmit: false # Rely on Mac_arm build_tests in presubmit.
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: build_tests
      subshard: "4_4"
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac_arm64 build_tests_1_4
    recipe: flutter/flutter_drone
    timeout: 60
    # Flake rate of >2.5% in presubmit
    presubmit: false # https://github.com/flutter/flutter/issues/150642
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: build_tests
      subshard: "1_4"
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac_arm64 build_tests_2_4
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: build_tests
      subshard: "2_4"
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac_arm64 build_tests_3_4
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: build_tests
      subshard: "3_4"
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac_arm64 build_tests_4_4
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: build_tests
      subshard: "4_4"
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac_benchmark complex_layout_macos__start_up
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      task_name: complex_layout_macos__start_up

  - name: Mac_benchmark complex_layout_scroll_perf_macos__timeline_summary
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      task_name: complex_layout_scroll_perf_macos__timeline_summary

  - name: Mac customer_testing
    enabled_branches:
      - master
    recipe: flutter/flutter_drone
    # Timeout in minutes for the whole task.
    timeout: 60
    properties:
      shard: customer_testing
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      test_timeout_secs: "2700" # Allows 45 minutes (up from 30 default)

  - name: Mac dart_plugin_registry_test
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: dart_plugin_registry_test
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac flavors_test_macos
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: flavors_test_macos

  - name: Mac_benchmark flutter_gallery_macos__compile
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      task_name: flutter_gallery_macos__compile

  - name: Mac flutter_packaging_test
    recipe: packaging/packaging
    presubmit: false
    enabled_branches:
      - master
    properties:
      task_name: flutter_packaging
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    runIf:
      - .ci.yaml
      - engine/**
      - DEPS
      - dev/bots/**

  - name: Mac_arm64 flutter_packaging_test
    recipe: packaging/packaging
    presubmit: false
    enabled_branches:
      - master
    properties:
      task_name: flutter_packaging
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    runIf:
      - .ci.yaml
      - engine/**
      - DEPS
      - dev/bots/**

  - name: Mac_benchmark flutter_view_macos__start_up
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      task_name: flutter_view_macos__start_up

  - name: Mac framework_tests_libraries
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      cpu: x86 # https://github.com/flutter/flutter/issues/119880
      dependencies: >-
        [
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: framework_tests
      subshard: libraries
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    runIf:
      - dev/**
      - packages/flutter/**
      - packages/flutter_driver/**
      - packages/integration_test/**
      - packages/flutter_localizations/**
      - packages/fuchsia_remote_debug_protocol/**
      - packages/flutter_test/**
      - packages/flutter_goldens/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac framework_tests_impeller
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      cpu: x86 # https://github.com/flutter/flutter/issues/119880
      dependencies: >-
        [
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: framework_tests
      subshard: impeller
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    runIf:
      - dev/**
      - packages/flutter/**
      - packages/flutter_driver/**
      - packages/integration_test/**
      - packages/flutter_localizations/**
      - packages/fuchsia_remote_debug_protocol/**
      - packages/flutter_test/**
      - packages/flutter_goldens/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_x64 framework_tests_misc
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "android_sdk", "version": "version:36v1"}
        ]
      shard: framework_tests
      subshard: misc
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    runIf:
      - dev/**
      - examples/api/**
      - packages/flutter/**
      - packages/flutter_driver/**
      - packages/integration_test/**
      - packages/flutter_localizations/**
      - packages/fuchsia_remote_debug_protocol/**
      - packages/flutter_test/**
      - packages/flutter_goldens/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 framework_tests_misc
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "android_sdk", "version": "version:36v1"}
        ]
      shard: framework_tests
      subshard: misc
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    runIf:
      - dev/**
      - examples/api/**
      - packages/flutter/**
      - packages/flutter_driver/**
      - packages/integration_test/**
      - packages/flutter_localizations/**
      - packages/fuchsia_remote_debug_protocol/**
      - packages/flutter_test/**
      - packages/flutter_goldens/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac framework_tests_widgets
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      cpu: x86 # https://github.com/flutter/flutter/issues/119880
      dependencies: >-
        [
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: framework_tests
      subshard: widgets
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    runIf:
      - dev/**
      - packages/flutter/**
      - packages/flutter_driver/**
      - packages/integration_test/**
      - packages/flutter_localizations/**
      - packages/fuchsia_remote_debug_protocol/**
      - packages/flutter_test/**
      - packages/flutter_goldens/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac gradle_plugin_bundle_test
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: gradle_plugin_bundle_test
    runIf:
      - dev/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_benchmark hello_world_macos__compile
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      task_name: hello_world_macos__compile

  - name: Mac integration_ui_test_test_macos
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "mac"]
      task_name: integration_ui_test_test_macos

  - name: Mac module_custom_host_app_name_test
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: module_custom_host_app_name_test
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac module_host_with_custom_build_test
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: module_host_with_custom_build_test
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac build_android_host_app_with_module_aar
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: build_android_host_app_with_module_aar
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac build_android_host_app_with_module_source
    recipe: devicelab/devicelab_drone
    timeout: 60
    presubmit: false
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: build_android_host_app_with_module_source
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 module_test_ios
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: module_test_ios
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_benchmark platform_view_macos__start_up
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      task_name: platform_view_macos__start_up

  - name: Mac platform_channel_sample_test_macos
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: platform_channel_sample_test_macos

  - name: Mac plugin_dependencies_test
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: plugin_dependencies_test
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_x64 plugin_lint_mac
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: plugin_lint_mac
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - packages/integration_test/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 plugin_lint_mac
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac", "arm64"]
      task_name: plugin_lint_mac
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - packages/integration_test/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac plugin_test
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: plugin_test
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac plugin_test_ios
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: plugin_test_ios
      # Retry for flakes caused by https://github.com/flutter/flutter/issues/151772
      presubmit_max_attempts: "2"
      test_timeout_secs: "3600"
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac plugin_test_macos
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: plugin_test_macos
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_x64 tool_host_cross_arch_tests
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      shard: tool_host_cross_arch_tests
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      test_timeout_secs: "2700"
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 tool_host_cross_arch_tests
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      shard: tool_host_cross_arch_tests
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      test_timeout_secs: "2700"
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac tool_integration_tests_1_5
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      cpu: arm64
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: tool_integration_tests
      subshard: "1_5"
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      test_timeout_secs: "2700"
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac tool_integration_tests_2_5
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      cpu: arm64
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: tool_integration_tests
      subshard: "2_5"
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      test_timeout_secs: "2700"
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac tool_integration_tests_3_5
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      cpu: arm64
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: tool_integration_tests
      subshard: "3_5"
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      test_timeout_secs: "2700"
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac tool_integration_tests_4_5
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      cpu: arm64
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: tool_integration_tests
      subshard: "4_5"
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      test_timeout_secs: "2700"
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac tool_integration_tests_5_5
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      cpu: arm64
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: tool_integration_tests
      subshard: "5_5"
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      test_timeout_secs: "2700"
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_x64 tool_tests_commands
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      shard: tool_tests
      subshard: commands
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac_arm64 tool_tests_commands
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      shard: tool_tests
      subshard: commands
      tags: >
        ["framework", "hostonly", "shard", "mac"]

  - name: Mac tool_tests_general
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      add_recipes_cq: "true"
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "open_jdk", "version": "version:21"}
        ]
      shard: tool_tests
      subshard: general
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_x64 verify_binaries_codesigned
    enabled_branches:
      - flutter-\d+\.\d+-candidate\.\d+
    recipe: flutter/flutter_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      shard: verify_binaries_codesigned

  - name: Mac_arm64 verify_binaries_codesigned
    enabled_branches:
      - flutter-\d+\.\d+-candidate\.\d+
    recipe: flutter/flutter_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      shard: verify_binaries_codesigned

  - name: Mac web_tool_tests
    recipe: flutter/flutter_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "android_sdk", "version": "version:36v1"},
          {"dependency": "chrome_and_driver", "version": "version:125.0.6422.141"},
          {"dependency": "open_jdk", "version": "version:21"},
          {"dependency": "goldctl", "version": "git_revision:2387d6fff449587eecbb7e45b2692ca0710b63b9"}
        ]
      shard: web_tool_tests
      subshard: "1_1"
      tags: >
        ["framework", "hostonly", "shard", "mac"]
      test_timeout_secs: "3600" # 60 minutes to match the global `timeout` property.
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  # mac mokey test
  - name: Mac_arm64_mokey entrypoint_dart_registrant
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "arm64", "mokey"]
      task_name: entrypoint_dart_registrant
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  # mac mokey benchmark
  - name: Mac_mokey hello_world_android__compile
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "mokey"]
      task_name: hello_world_android__compile

  # mac mokey test
  - name: Mac_arm64_mokey hello_world_android__compile
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "arm64", "mokey"]
      task_name: hello_world_android__compile

  # mac mokey benchmark
  - name: Mac_mokey hot_mode_dev_cycle__benchmark
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "mokey"]
      task_name: hot_mode_dev_cycle__benchmark

  # mac mokey test
  - name: Mac_mokey integration_test_test
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "mokey"]
      task_name: integration_test_test

  # mac mokey test
  - name: Mac_arm64_mokey integration_test_test
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "arm64", "mokey"]
      task_name: integration_test_test

  # mac mokey test
  - name: Mac_arm64_mokey integration_ui_frame_number
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "arm64", "mokey"]
      task_name: integration_ui_frame_number

  # mac mokey benchmark
  - name: Mac_mokey microbenchmarks
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "mokey"]
      task_name: microbenchmarks

  # mac mokey test
  - name: Mac_arm64_mokey native_assets_android
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "arm64", "mokey"]
      task_name: native_assets_android

  # mac mokey test
  - name: Mac_mokey run_debug_test_android
    recipe: devicelab/devicelab_drone
    presubmit: false
    runIf:
      - .ci.yaml
      - dev/**
      - DEPS
      - engine/**
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "mokey"]
      task_name: run_debug_test_android

  # mac mokey test
  - name: Mac_arm64_mokey run_debug_test_android
    recipe: devicelab/devicelab_drone
    presubmit: false
    runIf:
      - .ci.yaml
      - engine/**
      - DEPS
      - dev/**
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "arm64", "mokey"]
      task_name: run_debug_test_android

  # mac mokey test
  - name: Mac_mokey run_release_test
    recipe: devicelab/devicelab_drone
    presubmit: false
    runIf:
      - .ci.yaml
      - engine/**
      - DEPS
      - dev/**
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "mokey"]
      task_name: run_release_test

  # mac mokey test
  - name: Mac_arm64_mokey run_release_test
    recipe: devicelab/devicelab_drone
    presubmit: false
    runIf:
      - .ci.yaml
      - engine/**
      - DEPS
      - dev/**
    timeout: 60
    properties:
      tags: >
        ["devicelab", "android", "mac", "arm64", "mokey"]
      task_name: run_release_test

  - name: Mac_ios animation_with_microtasks_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: animation_with_microtasks_perf_ios__timeline_summary

  - name: Mac_ios backdrop_filter_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: backdrop_filter_perf_ios__timeline_summary

  - name: Mac_arm64_ios basic_material_app_ios__compile
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: basic_material_app_ios__compile

  - name: Mac_ios channels_integration_test_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: channels_integration_test_ios

  - name: Mac_ios complex_layout_ios__start_up
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: complex_layout_ios__start_up

  - name: Mac_ios complex_layout_scroll_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: complex_layout_scroll_perf_ios__timeline_summary

  - name: Mac_ios complex_layout_scroll_perf_bad_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: complex_layout_scroll_perf_bad_ios__timeline_summary

  - name: Mac_ios color_filter_and_fade_perf_ios__e2e_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: color_filter_and_fade_perf_ios__e2e_summary

  - name: Mac_ios imagefiltered_transform_animation_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: imagefiltered_transform_animation_perf_ios__timeline_summary

  # TODO(https://github.com/flutter/flutter/issues/106806): Find a way to
  # re-enable this without "ignore_flakiness: "true"", likely by loostening the
  # test assertions, or potentially not running the frame rate tests at all on
  # iOS (for example, doing pixel-tests instead).
  #
  # Also, rename this to "external_textures_integration_test" to be consistent
  # with the Android test, but that can wait until we've figured out the flake.
  - name: Mac_ios external_ui_integration_test_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: external_textures_integration_test_ios
      ignore_flakiness: "true"

  - name: Mac_ios route_test_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: route_test_ios

  - name: Mac_ios flavors_test_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: flavors_test_ios

  - name: Mac_arm64_ios flutter_gallery_ios__compile
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac", "arm64"]
      task_name: flutter_gallery_ios__compile

  - name: Mac_ios flutter_gallery_ios__start_up
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: flutter_gallery_ios__start_up

  - name: Mac_ios flutter_view_ios__start_up
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: flutter_view_ios__start_up

  - name: Mac_arm64_ios hello_world_ios__compile
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac", "arm64"]
      task_name: hello_world_ios__compile

  - name: Mac_arm64_ios imitation_game_flutter
    recipe: devicelab/devicelab_drone
    presubmit: false
    bringup: true
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac", "arm64"]
      task_name: imitation_game_flutter__compile

  - name: Mac_arm64_ios imitation_game_swiftui
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac", "arm64"]
      task_name: imitation_game_swiftui__compile

  - name: Mac_x64 hot_mode_dev_cycle_macos_target__benchmark
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: hot_mode_dev_cycle_macos_target__benchmark
    runIf:
      - dev/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 hot_mode_dev_cycle_macos_target__benchmark
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac", "arm64"]
      task_name: hot_mode_dev_cycle_macos_target__benchmark
    runIf:
      - .ci.yaml
      - engine/**
      - DEPS
      - dev/**

  - name: Mac_x64_ios integration_test_test_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: integration_test_test_ios

  - name: Mac_arm64_ios integration_test_test_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: integration_test_test_ios

  - name: Mac_ios integration_ui_ios_driver
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: integration_ui_ios_driver

  - name: Mac_ios integration_ui_ios_frame_number
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: integration_ui_ios_frame_number

  - name: Mac_ios integration_ui_ios_keyboard_resize
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: integration_ui_ios_keyboard_resize

  - name: Mac_ios integration_ui_ios_textfield
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: integration_ui_ios_textfield

  - name: Mac_x64 ios_app_with_extensions_test
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: ios_app_with_extensions_test

  - name: Mac_arm64 ios_app_with_extensions_test
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac", "arm64"]
      task_name: ios_app_with_extensions_test

  - name: Mac_ios ios_defines_test
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: ios_defines_test

  - name: Mac_ios ios_platform_view_tests
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: ios_platform_view_tests

  - name: Mac_ios large_image_changer_perf_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: large_image_changer_perf_ios

  - name: Mac_x64 macos_chrome_dev_mode
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: macos_chrome_dev_mode

  - name: Mac_arm64 macos_chrome_dev_mode
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac", "arm64"]
      task_name: macos_chrome_dev_mode

  - name: Mac_ios microbenchmarks_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    bringup: true
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: microbenchmarks_ios

  - name: Mac native_assets_ios_simulator
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: native_assets_ios_simulator

  - name: Mac_ios native_assets_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: native_assets_ios

  - name: Mac_ios native_platform_view_ui_tests_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: native_platform_view_ui_tests_ios

  - name: Mac_ios new_gallery_ios__transition_perf
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: new_gallery_ios__transition_perf

  - name: Mac_ios new_gallery_skia_ios__transition_perf
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: new_gallery_skia_ios__transition_perf

  - name: Mac_ios platform_channel_sample_test_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: platform_channel_sample_test_ios

  - name: Mac_ios platform_channel_sample_test_swift
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: platform_channel_sample_test_swift

  - name: Mac_ios platform_channels_benchmarks_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: platform_channels_benchmarks_ios

  - name: Mac_ios platform_interaction_test_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: platform_interaction_test_ios

  - name: Mac_ios platform_view_ios__start_up
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: platform_view_ios__start_up

  - name: Mac_ios platform_views_scroll_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: platform_views_scroll_perf_ios__timeline_summary

  - name: Mac_ios platform_views_scroll_perf_ad_banners__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: platform_views_scroll_perf_ad_banners__timeline_summary

  - name: Mac_ios platform_views_scroll_perf_bottom_ad_banner__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: platform_views_scroll_perf_bottom_ad_banner__timeline_summary

  - name: Mac_ios platform_views_scroll_perf_non_intersecting_impeller_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: platform_views_scroll_perf_non_intersecting_impeller_ios__timeline_summary

  - name: Mac_ios post_backdrop_filter_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: post_backdrop_filter_perf_ios__timeline_summary

  - name: Mac_ios simple_animation_perf_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: simple_animation_perf_ios

  - name: Mac_ios wide_gamut_ios
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: wide_gamut_ios

  - name: Mac_x64_ios hot_mode_dev_cycle_ios__benchmark
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: hot_mode_dev_cycle_ios__benchmark

  - name: Mac_arm64_ios hot_mode_dev_cycle_ios_beta__benchmark
    recipe: devicelab/devicelab_drone
    presubmit: false
    bringup: true
    timeout: 60
    properties:
      os: Mac-15.3
      device_os: iOS-18.4
      $flutter/osx_sdk : >-
        {
          "sdk_version": "16e5104o"
        }
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: hot_mode_dev_cycle_ios__benchmark

  - name: Mac_arm64_ios hot_mode_dev_cycle_ios__benchmark
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      # TODO(vashworth): Use "hot_mode_dev_cycle_ios__benchmark" once https://github.com/flutter/flutter/issues/142305 is fixed.
      task_name: hot_mode_dev_cycle_ios__benchmark_no_dds

  - name: Mac_x64 hot_mode_dev_cycle_ios_simulator
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: hot_mode_dev_cycle_ios_simulator

  - name: Mac_ios fullscreen_textfield_perf_ios__e2e_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: fullscreen_textfield_perf_ios__e2e_summary

  - name: Mac_ios very_long_picture_scrolling_perf_ios__e2e_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 120
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: very_long_picture_scrolling_perf_ios__e2e_summary

  - name: Mac_ios tiles_scroll_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: tiles_scroll_perf_ios__timeline_summary

  - name: Mac_build_test flutter_gallery__transition_perf_e2e_ios
    recipe: devicelab/devicelab_drone_build_test
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: flutter_gallery__transition_perf_e2e_ios
      drone_dimensions: >
        ["device_os=iOS-17|iOS-18","os=Mac-15.5", "cpu=x86"]

  - name: Mac_ios animated_blur_backdrop_filter_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: animated_blur_backdrop_filter_perf_ios__timeline_summary

  - name: Mac_ios draw_points_perf_ios__timeline_summary
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: draw_points_perf_ios__timeline_summary

  - name: Mac_ios spell_check_test
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: spell_check_test_ios

  - name: Mac_x64 native_ui_tests_macos
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: native_ui_tests_macos
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 native_ui_tests_macos
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: native_ui_tests_macos
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac channels_integration_test
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: channels_integration_test_macos
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac run_debug_test_macos
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac"]
      task_name: run_debug_test_macos
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 run_debug_test_macos
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac", "arm64"]
      task_name: run_debug_test_macos
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 run_release_test_macos
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac", "arm64"]
      task_name: run_release_test_macos
    runIf:
      - dev/**
      - packages/flutter_tools/**
      - bin/**
      - .ci.yaml
      - engine/**
      - DEPS

  - name: Mac_arm64 mac_desktop_impeller
    recipe: devicelab/devicelab_drone
    presubmit: false
    timeout: 60
    properties:
      dependencies: >-
        [
          {"dependency": "ruby", "version": "ruby_3.1-pod_1.13"}
        ]
      tags: >
        ["devicelab", "hostonly", "mac", "arm64"]
      task_name: run_release_test_macos

  - name: Mac_ios keyboard_hot_restart_ios
    recipe: devicelab/devicelab_drone
    bringup: true
    presubmit: false
    timeout: 60
    properties:
      tags: >
        ["devicelab", "ios", "mac"]
      task_name: keyboard_hot_restart_ios

  - name: Mac_benchmark flutter_tool_startup__macos
    presubmit: false
    recipe: devicelab/devicelab_drone
    timeout: 60
    properties:
      task_name: flutter_tool_startup

  - name: Mac flutter_packaging
    recipe: packaging/packaging
    timeout: 60
    scheduler: release
    enabled_branches:
      - beta
      - stable
    properties:
      task_name: flutter_packaging
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    drone_dimensions:
      - os=Mac
      - cpu=x86

  - name: Mac_arm64 flutter_packaging
    recipe: packaging/packaging
    timeout: 60
    scheduler: release
    enabled_branches:
      - beta
      - stable
    properties:
      task_name: flutter_packaging
      tags: >
        ["framework", "hostonly", "shard", "mac"]
    drone_dimensions:
      - os=Mac
      - cpu=arm64
